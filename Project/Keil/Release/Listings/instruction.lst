C51 COMPILER V9.60.7.0   INSTRUCTION                                                       11/08/2024 16:31:55 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE INSTRUCTION
OBJECT MODULE PLACED IN .\Release\Objects\instruction.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\..\User\instruction.c LARGE OPTIMIZE(8,SIZE) BROWSE INTVECTOR(0X000C)
                    - INCDIR(..\..\Libraries\Include;..\..\User;..\..\User\lib;..\..\Hardware) INTERVAL(3) DEBUG OBJECTEXTEND PRINT(.\Release
                    -\Listings\instruction.lst) OBJECT(.\Release\Objects\instruction.obj)

line level    source

   1          #include "instruction.h"
   2          
   3          #include <string.h>
   4          
   5          // ç”¨bitå®šä¹‰ï¼Œæ¥èŠ‚çœç©ºé—´
   6          volatile bit flag_get_all_status = 0;    // è·å–æ‰€æœ‰åŠŸèƒ½çš„çŠ¶æ€
   7          volatile bit flag_get_gear = 0;          // è·å–æŒ¡ä½çŠ¶æ€ / å¾—åˆ°äº†æŒ¡ä½çš„çŠ¶æ€
   8          volatile bit flag_get_battery = 0;       // è·å–ç”µæ± çŠ¶æ€ / å¾—åˆ°äº†ç”µæ± çš„çŠ¶æ€ï¼ˆç”µæ± ç”µé‡ï¼
             -Œå•ä½ï¼šç™¾åˆ†æ¯”ï¼‰
   9          volatile bit flag_get_brake = 0;         // è·å–åˆ¹è½¦çŠ¶æ€ / å¾—åˆ°äº†åˆ¹è½¦çš„çŠ¶æ€
  10          volatile bit flag_get_left_turn = 0;     // è·å–å·¦è½¬å‘ç¯çš„çŠ¶æ€ / å¾—åˆ°äº†å·¦è½¬å‘ç¯çš„çŠ¶æ€
  11          volatile bit flag_get_right_turn = 0;    // è·å–å³è½¬å‘ç¯çš„çŠ¶æ€ / å¾—åˆ°äº†å³è½¬å‘ç¯çš„çŠ¶æ€
  12          volatile bit flag_get_high_beam = 0;     // è·å–è¿œå…‰ç¯çš„çŠ¶æ€ / å¾—åˆ°äº†è¿œå…‰ç¯çš„çŠ¶æ€
  13          volatile bit flag_get_engine_speed = 0;  // è·å–å‘åŠ¨æœºçš„è½¬é€Ÿ / å¾—åˆ°äº†å‘åŠ¨æœºçš„è½¬é€Ÿ
  14          volatile bit flag_get_speed = 0;         // è·å–æ—¶é€Ÿ / å¾—åˆ°äº†æ—¶é€Ÿ
  15          volatile bit flag_get_fuel = 0;          // è·å–æ²¹é‡ / å¾—åˆ°äº†æ²¹é‡ï¼ˆå•ä½ï¼šç™¾åˆ†æ¯”ï¼‰
  16          volatile bit flag_get_temp_of_water = 0; // è·å–æ°´æ¸© / å¾—åˆ°äº†æ°´æ¸©
  17          
  18          volatile bit flag_get_total_mileage = 0;     // è·å–å¤§è®¡é‡Œç¨‹ / å¾—åˆ°äº†å¤§è®¡é‡Œç¨‹
  19          volatile bit flag_get_sub_total_mileage = 0; // è·å–å°è®¡é‡Œç¨‹ / å¾—åˆ°äº†å°è®¡é‡Œç¨‹
  20          
  21          volatile bit flag_get_touch_key_status = 0; // è·å–è§¦æ‘¸æŒ‰é”®çš„çŠ¶æ€
  22          volatile bit flag_alter_date = 0;           // ä¿®æ”¹æ—¥æœŸ
  23          volatile bit flag_alter_time = 0;           // ä¿®æ”¹æ—¶é—´
  24          
  25          volatile bit flag_get_bat_val = 0;               // è·å–ç”µæ± ç”µå‹
  26          volatile bit flag_set_temp_of_water_warning = 0; // è®¾ç½®æ°´æ¸©æŠ¥è­¦
  27          
  28          volatile bit flag_clear_total_mileage = 0;     // æ¸…é™¤å¤§è®¡é‡Œç¨‹
  29          volatile bit flag_clear_sub_total_mileage = 0; // æ¸…é™¤å°è®¡é‡Œç¨‹
  30          
  31          // // å­˜æ”¾æ¥æ”¶åˆ°çš„è®¾ç½®æ°´æ¸©æŠ¥è­¦çš„æŒ‡ä»¤ä¸­ï¼Œå¯¹åº”çš„æ“ä½œï¼Œé»˜è®¤ä¸ºæ— æ“ä½œ
  32          // volatile u8 operation_set_temp_of_water_warning = OPERATION_SET_TEMP_OF_WATER_WARNING_NONE;
  33          
  34          // æ£€æŸ¥æ¥æ”¶æ˜¯å¦æ­£ç¡®çš„å‡½æ•°ï¼Œå¦‚æœæ¥æ”¶æ­£ç¡®ï¼Œ
  35          // æ ¹æ®æ¥æ”¶åˆ°çš„æ•°æ®ä¸­çš„æŒ‡ä»¤ï¼Œç»™å¯¹åº”çš„æŒ‡ä»¤çš„æ ‡å¿—ä½ç½®ä¸€
  36          void instruction_scan(void)
  37          {
  38   1          u8 i = 0; // æ³¨æ„è¦å¤§äºç­‰äºç¼“å†²åŒºèƒ½å­˜æ”¾çš„æŒ‡ä»¤æ•°ç›®
  39   1      
  40   1          for (i = 0; i < (UART0_RXBUF_LEN) / (FRAME_MAX_LEN); i++)
  41   1          {
  42   2              if (flagbuf_valid_instruction[i]) // å¦‚æœå¯¹åº”çš„ä½ç½®æœ‰åˆæ³•çš„æ•°æ®å¸§
  43   2              {
  44   3                  // æ ¹æ®æ¥æ”¶åˆ°æ•°æ®ä¸­çš„æŒ‡ä»¤ï¼Œç»™å¯¹åº”çš„æŒ‡ä»¤çš„æ ‡å¿—ä½ç½®ä¸€
  45   3                  // if (4 == uart0_recv_buf[i][1]) // å¦‚æœæ˜¯å››ä½é•¿åº¦çš„æŒ‡ä»¤
  46   3                  {
  47   4                      switch (uart0_recv_buf[i][2]) // æ ¹æ®ä¸åŒçš„æŒ‡ä»¤æ¥ç»™å¯¹åº”çš„æ ‡å¿—ä½ç½®ä¸€
  48   4                      {
  49   5                      case INSTRUCTION_GET_ALL_STATUS: // è·å–æ‰€æœ‰åŠŸèƒ½çš„çŠ¶æ€
  50   5                          flag_get_all_status = 1;
  51   5                          break;
  52   5      
C51 COMPILER V9.60.7.0   INSTRUCTION                                                       11/08/2024 16:31:55 PAGE 2   

  53   5                      case INSTRUCTION_GET_GEAR: // è·å–æŒ¡ä½çš„çŠ¶æ€
  54   5                          flag_get_gear = 1;
  55   5                          break;
  56   5      
  57   5                      case INSTRUCTION_GET_BATTERY: // è·å–ç”µæ± ç”µé‡çš„çŠ¶æ€
  58   5                          flag_get_battery = 1;
  59   5                          break;
  60   5      
  61   5                      case INSTRUCTION_GET_BARKE: // è·å–åˆ¹è½¦çš„çŠ¶æ€
  62   5                          flag_get_brake = 1;
  63   5                          break;
  64   5      
  65   5                      case INSTRUCTION_GET_LEFT_TURN: // è·å–å·¦è½¬å‘ç¯çš„çŠ¶æ€
  66   5                          flag_get_left_turn = 1;
  67   5                          break;
  68   5      
  69   5                      case INSTRUCTION_GET_RIGHT_TURN: // è·å–å³è½¬å‘ç¯çš„çŠ¶æ€
  70   5                          flag_get_right_turn = 1;
  71   5                          break;
  72   5      
  73   5                      case INSTRUCTION_GET_HIGH_BEAM: // è·å–è¿œå…‰ç¯çš„çŠ¶æ€
  74   5                          flag_get_high_beam = 1;
  75   5                          break;
  76   5      
  77   5                      case INSTRUCTION_GET_ENGINE_SPEED: // è·å–å‘åŠ¨æœºè½¬é€Ÿ
  78   5                          flag_get_engine_speed = 1;
  79   5                          break;
  80   5      
  81   5                      case INSTRUCTION_GET_SPEED: // è·å–æ—¶é€Ÿ
  82   5                          flag_get_speed = 1;
  83   5                          break;
  84   5      
  85   5                      case INSTRUCTION_GET_FUEL: // è·å–æ²¹é‡
  86   5                          flag_get_fuel = 1;
  87   5                          break;
  88   5      
  89   5                      case INSTRUCTION_GET_TEMP_OF_WATER: // è·å–æ°´æ¸©
  90   5                          flag_get_temp_of_water = 1;
  91   5                          break;
  92   5      
  93   5                      case INSTRUCTION_GET_TOTAL_MILEAGE: // è·å–å¤§è®¡é‡Œç¨‹
  94   5                          flag_get_total_mileage = 1;
  95   5                          break;
  96   5      
  97   5                      case INSTRUCTION_GET_SUBTOTAL_MILEAGE: // è·å–å°è®¡é‡Œç¨‹
  98   5                          flag_get_sub_total_mileage = 1;
  99   5                          break;
 100   5      
 101   5                      case INSTRUCTION_GET_TOUCH_KEY_STATUS: // è·å–è§¦æ‘¸æŒ‰é”®çš„çŠ¶æ€
 102   5                          flag_get_touch_key_status = 1;
 103   5                          break;
 104   5      
 105   5                      case INSTRUCTION_ALTER_DATE: // ä¿®æ”¹æ—¥æœŸ
 106   5                          flag_alter_date = 1;
 107   5                          // fun_info.date = ((u32)uart0_recv_buf[i][3] << 24) + /* å¹´ */
 108   5                          //                 ((u32)uart0_recv_buf[i][4] << 16) +
 109   5                          //                 ((u32)uart0_recv_buf[i][5] << 8) + /* æœˆ */
 110   5                          //                 ((u32)uart0_recv_buf[i][6] << 0);  /* æ—¥ */
 111   5                          fun_info.year = ((u16)uart0_recv_buf[i][3] << 8) +
 112   5                                          (u16)uart0_recv_buf[i][4];
 113   5                          fun_info.month = uart0_recv_buf[i][5];
 114   5                          fun_info.day = uart0_recv_buf[i][6];
C51 COMPILER V9.60.7.0   INSTRUCTION                                                       11/08/2024 16:31:55 PAGE 3   

 115   5      
 116   5                          break;
 117   5      
 118   5                      case INSTRUCTION_ALTER_TIME: // ä¿®æ”¹æ—¶é—´
 119   5                          flag_alter_time = 1;
 120   5                          // printf("buff:\n");
 121   5                          // printf("%x %x %x %x %x %x %x \n", (u32)uart0_recv_buf[i][0], (u32)uart0_recv_buf[i]
             -[1], (u32)uart0_recv_buf[i][2], (u32)uart0_recv_buf[i][3], (u32)uart0_recv_buf[i][4], (u32)uart0_recv_buf[i][5], (u32)ua
             -rt0_recv_buf[i][6]);
 122   5      
 123   5      #if 0 // æµ‹è¯•ç”¨çš„ç¨‹åº
                                  {
                                      u8 j = 0;
                                      for (j = 0; j < (FRAME_MAX_LEN); j++)
                                      {
                                          printf("%2x ", (u16)uart0_recv_buf[i][j]);
                                      }
                                      printf("\n==========================\n");
                                  }
              
                                  { // æµ‹è¯•æ ¡éªŒå’Œé€šä¸é€šè¿‡
                                      u8 check_sum = 0;
                                      check_sum += (uart0_recv_buf[i][0] +
                                                    uart0_recv_buf[i][1] +
                                                    uart0_recv_buf[i][2] +
                                                    uart0_recv_buf[i][3] +
                                                    uart0_recv_buf[i][4] +
                                                    uart0_recv_buf[i][5]);
                                      check_sum &= 0x0F;
                                      if (check_sum == uart0_recv_buf[i][6])
                                      {
                                          printf("check sum pass\n");
                                      }
                                      else
                                      {
                                          printf("check sum err \n");
                                      }
                                  }
              
                                  if (0)
                                  {
                                      u8 i = 0;
                                      u8 j = 0;
                                      u8 k = 0;
                                      for (i = 0; i < (UART0_RXBUF_LEN) / (FRAME_MAX_LEN); i++)
                                      {
                                          for (j = 0; j < (UART0_RXBUF_LEN) / (FRAME_MAX_LEN); j++)
                                          {
                                              uart0_sendbyte(j + '0');
                                              uart0_sendbyte('\n');
                                              for (k = 0; k < FRAME_MAX_LEN; k++)
                                              {
                                                  printf("%2x ", (u16)uart0_recv_buf[j][k]);
                                              }
              
                                              printf("\n==========================\n");
                                          }
                                      }
                                  }
              
              #endif // å‘ä¸²å£å‘é€æ•´ä¸ªç¼“å†²åŒºçš„æ•°æ®
 174   5                          break;
C51 COMPILER V9.60.7.0   INSTRUCTION                                                       11/08/2024 16:31:55 PAGE 4   

 175   5      
 176   5                      case INSTRUCTION_GET_BATTERY_VAL: // è·å–ç”µæ± ç”µå‹
 177   5                          flag_get_bat_val = 1;
 178   5                          break;
 179   5      
 180   5                      case INSTRUCTION_SET_TEMP_OF_WATER_WARNING: // è®¾ç½®æ°´æ¸©æŠ¥è­¦
 181   5                          flag_set_temp_of_water_warning = 1;
 182   5      
 183   5                          break;
 184   5      
 185   5                      case INSTRUCTION_CLEAR_TOTAL_MILEAGE: // æ¸…é™¤å¤§è®¡é‡Œç¨‹
 186   5                          flag_clear_total_mileage = 1;
 187   5                          break;
 188   5      
 189   5                      case INSTRUCTION_CLEAR_SUBTOTAL_MILEAGE: // æ¸…é™¤å°è®¡é‡Œç¨‹
 190   5                          flag_clear_sub_total_mileage = 1;
 191   5                          break;
 192   5                      }
 193   4      
 194   4                      if (recv_frame_cnt > 0) //
 195   4                      {
 196   5                          recv_frame_cnt--; // ä»ä¸²å£æ¥æ”¶çš„æ•°æ®å¸§æ•°ç›®å‡ä¸€ï¼Œè¡¨ç¤ºæŒ‡ä»¤å·²ç»ä»ç¼
             -“å†²åŒºå–å‡º
 197   5                      }
 198   4      
 199   4                      flagbuf_valid_instruction[i] = 0; // æ¸…ç©ºç¼“å†²åŒºå¯¹åº”çš„å…ƒç´ ï¼Œè¡¨ç¤ºè¯¥ä¸‹æ ‡çš„æŒ
             -‡ä»¤å·²ç»å¤„ç†
 200   4                      uart0_recv_len[i] = 0;
 201   4                      recved_flagbuf[i] = 0;
 202   4                      memset(uart0_recv_buf[i], 0, FRAME_MAX_LEN); // æ¸…ç©ºç¼“å†²åŒºå¯¹åº”çš„å…ƒç´ 
 203   4                  } // if (4 == uart0_recv_buf[i][1])
 204   3              }
 205   2          }
 206   1      }
 207          
 208          void instruction_handle(void)
 209          {
 210   1          if (flag_get_all_status)
 211   1          {
 212   2              // å¦‚æœè¦è·å–æ‰€æœ‰åŠŸèƒ½çš„çŠ¶æ€
 213   2              flag_get_all_status = 0; // æ¸…é™¤æ ‡å¿—ä½
 214   2      
 215   2      #if USE_MY_DEBUG
 216   2              printf(" flag_get_all_status\n");
 217   2      #endif
 218   2      
 219   2              // è·å–æ‰€æœ‰åŠŸèƒ½çš„çŠ¶æ€ï¼Œéœ€è¦æŠŠè¿™äº›åŠŸèƒ½å¯¹åº”çš„çŠ¶æ€éƒ½å‘é€å‡ºå»
 220   2          }
 221   1      
 222   1          if (flag_get_gear)
 223   1          {
 224   2              // å¦‚æœè¦è·å–æŒ¡ä½çš„çŠ¶æ€
 225   2              flag_get_gear = 0; //
 226   2      
 227   2      #if USE_MY_DEBUG
 228   2              printf(" flag_get_gear\n");
 229   2      #endif
 230   2      
 231   2              send_data(SEND_GEAR, fun_info.gear); // å‘é€å½“å‰æŒ¡ä½çš„çŠ¶æ€
 232   2          }
 233   1      
 234   1          if (flag_get_battery)
C51 COMPILER V9.60.7.0   INSTRUCTION                                                       11/08/2024 16:31:55 PAGE 5   

 235   1          {
 236   2              // å¦‚æœè¦è·å–ç”µæ± ç”µé‡çš„çŠ¶æ€
 237   2              flag_get_battery = 0;
 238   2      #if USE_MY_DEBUG
 239   2              printf(" flag_get_battery\n");
 240   2      #endif
 241   2      
 242   2              send_data(SEND_BATTERY, fun_info.battery); // å‘é€ç”µæ± ç”µé‡
 243   2          }
 244   1      
 245   1          if (flag_get_brake)
 246   1          {
 247   2              // å¦‚æœè¦è·å–è·å–åˆ¹è½¦çš„çŠ¶æ€
 248   2              flag_get_brake = 0;
 249   2      
 250   2      #if USE_MY_DEBUG
 251   2              printf(" flag_get_brake\n");
 252   2      #endif
 253   2      
 254   2              send_data(SEND_BARKE, fun_info.brake); // å‘é€å½“å‰åˆ¹è½¦çš„çŠ¶æ€
 255   2          }
 256   1      
 257   1          if (flag_get_left_turn)
 258   1          {
 259   2              // å¦‚æœè¦è·å–å·¦è½¬å‘ç¯çš„çŠ¶æ€
 260   2              flag_get_left_turn = 0;
 261   2      
 262   2      #if USE_MY_DEBUG
 263   2              printf(" flag_get_left_turn\n");
 264   2      #endif
 265   2      
 266   2              send_data(SEND_LEFT_TURN, fun_info.left_turn); // å‘é€å½“å‰å·¦è½¬å‘ç¯çš„çŠ¶æ€
 267   2          }
 268   1      
 269   1          if (flag_get_right_turn)
 270   1          {
 271   2              // å¦‚æœè¦è·å–å³è½¬å‘ç¯çš„çŠ¶æ€
 272   2              flag_get_right_turn = 0;
 273   2      
 274   2              printf(" flag_get_right_turn\n");
 275   2      
 276   2              send_data(SEND_RIGHT_TURN, fun_info.right_turn); // å‘é€å½“å‰å³è½¬å‘ç¯çš„çŠ¶æ€
 277   2          }
 278   1      
 279   1          if (flag_get_high_beam)
 280   1          {
 281   2              // å¦‚æœè¦è·å–è¿œå…‰ç¯çš„çŠ¶æ€
 282   2              flag_get_high_beam = 0;
 283   2      
 284   2              printf(" flag_get_high_beam\n");
 285   2      
 286   2              send_data(SEND_HIGH_BEAM, fun_info.high_beam); // å‘é€å½“å‰è¿œå…‰ç¯çš„çŠ¶æ€
 287   2          }
 288   1      
 289   1          if (flag_get_engine_speed)
 290   1          {
 291   2              // å¦‚æœè¦è·å–å‘åŠ¨æœºçš„è½¬é€Ÿ
 292   2              flag_get_engine_speed = 0;
 293   2      
 294   2              printf(" flag_get_engine_speed \n");
 295   2      
 296   2              send_data(SEND_ENGINE_SPEED, fun_info.engine_speeed);
C51 COMPILER V9.60.7.0   INSTRUCTION                                                       11/08/2024 16:31:55 PAGE 6   

 297   2          }
 298   1      
 299   1          if (flag_get_speed)
 300   1          {
 301   2              // å¦‚æœè¦è·å–æ—¶é€Ÿ
 302   2              flag_get_speed = 0;
 303   2      
 304   2              printf(" flag_get_speed \n");
 305   2      
 306   2      #ifdef INTERNATIONAL // ä½¿ç”¨å…¬åˆ¶å•ä½
 307   2      
 308   2              send_data(SEND_SPEED, fun_info.speed); // å‘é€å½“å‰é‡‡é›†åˆ°çš„è½¦é€Ÿï¼ˆæ—¶é€Ÿï¼‰
 309   2      
 310   2      #endif // INTERNATIONAL ä½¿ç”¨å…¬åˆ¶å•ä½
 311   2      
 312   2      #ifdef IMPERIAL // ä½¿ç”¨è‹±åˆ¶å•ä½
              
                      send_data(SEND_SPEED, fun_info.speed * 621 / 1000);
              
              #endif
 317   2          }
 318   1      
 319   1          if (flag_get_fuel)
 320   1          {
 321   2              // å¦‚æœè¦è·å–æ²¹é‡
 322   2              flag_get_fuel = 0;
 323   2      
 324   2              printf(" flag_get_fuel \n");
 325   2          }
 326   1      
 327   1          if (flag_get_temp_of_water)
 328   1          {
 329   2              // å¦‚æœè¦è·å–æ°´æ¸©
 330   2              flag_get_temp_of_water = 0;
 331   2      
 332   2              printf(" flag_get_temp_of_water \n");
 333   2          }
 334   1      
 335   1          if (flag_get_total_mileage)
 336   1          {
 337   2              // å¦‚æœè¦è·å–å¤§è®¡é‡Œç¨‹ / å¾—åˆ°äº†å¤§è®¡é‡Œç¨‹æ–°çš„æ•°æ®
 338   2              flag_get_total_mileage = 0;
 339   2              printf(" flag_get_total_mileage \n");
 340   2      
 341   2      #ifdef INTERNATIONAL // å…¬åˆ¶å•ä½
 342   2      
 343   2              // åªå‘é€ç™¾ç±³åŠä»¥ä¸Šçš„æ•°æ®
 344   2              send_data(SEND_TOTAL_MILEAGE, fun_info.total_mileage / 100);
 345   2      
 346   2      #endif // INTERNATIONAL å…¬åˆ¶å•ä½
 347   2      
 348   2      #ifdef IMPERIAL // è‹±åˆ¶å•ä½
              #if USE_MY_DEBUG
                      printf("total mileage: %lu * 0.1 mile", fun_info.total_mileage * 62137 / 10000000);
              #endif // USE_MY_DEBUG
                     // åªå‘é€0.1è‹±é‡ŒåŠä»¥ä¸Šçš„æ•°æ®
                      send_data(SEND_TOTAL_MILEAGE, fun_info.total_mileage * 62137 / 10000000);
              
              #endif // IMPERIAL è‹±åˆ¶å•ä½
 356   2          }
 357   1      
 358   1          if (flag_get_sub_total_mileage)
C51 COMPILER V9.60.7.0   INSTRUCTION                                                       11/08/2024 16:31:55 PAGE 7   

 359   1          {
 360   2              // å¦‚æœè¦è·å–å°è®¡é‡Œç¨‹ / å¾—åˆ°äº†å°è®¡é‡Œç¨‹æ–°çš„æ•°æ®
 361   2              flag_get_sub_total_mileage = 0;
 362   2              printf(" flag_get_sub_total_mileage \n");
 363   2      #ifdef INTERNATIONAL // å…¬åˆ¶å•ä½
 364   2      
 365   2              // åªå‘é€åƒç±³åŠä»¥ä¸Šçš„æ•°æ®
 366   2              send_data(SEND_SUBTOTAL_MILEAGE, fun_info.subtotal_mileage / 1000);
 367   2      
 368   2      #endif // INTERNATIONAL å…¬åˆ¶å•ä½
 369   2      
 370   2      #ifdef IMPERIAL // è‹±åˆ¶å•ä½
              #if USE_MY_DEBUG
                      printf("sub total mileage: %lu mile", fun_info.subtotal_mileage * 62137 / 100000000);
              #endif // USE_MY_DEBUG
                     // åªå‘é€è‹±é‡ŒåŠä»¥ä¸Šçš„æ•°æ®
                      send_data(SEND_SUBTOTAL_MILEAGE, fun_info.subtotal_mileage * 62137 / 100000000);
              
              #endif // IMPERIAL è‹±åˆ¶å•ä½
 378   2          }
 379   1      
 380   1          if (flag_get_touch_key_status)
 381   1          {
 382   2              // å¦‚æœè¦è·å–è§¦æ‘¸æŒ‰é”®çš„çŠ¶æ€ / å¾—åˆ°äº†è§¦æ‘¸æŒ‰é”®çš„çŠ¶æ€
 383   2              flag_get_touch_key_status = 0;
 384   2              printf(" flag_get_touch_key_status \n");
 385   2          }
 386   1      
 387   1          if (flag_alter_date)
 388   1          {
 389   2              // å¦‚æœè¦ä¿®æ”¹æ—¥æœŸ
 390   2              flag_alter_date = 0;
 391   2              printf(" flag_alter_date \n");
 392   2      
 393   2              // printf("year %d month %d day %d \n", fun_info.date >> 16, ((fun_info.date >> 8) & 0xFF), (fun_i
             -nfo.date & 0xFF));
 394   2              printf("year %d month %d day %d \n", (u16)fun_info.year, (u16)fun_info.month, (u16)fun_info.day);
 395   2      
 396   2              fun_info_save(); // å°†æ—¥æœŸä¿¡æ¯å†™å›flash
 397   2          }
 398   1      
 399   1          if (flag_alter_time)
 400   1          {
 401   2              // å¦‚æœè¦ä¿®æ”¹æ—¶é—´
 402   2              flag_alter_time = 0;
 403   2              printf(" flag_alter_time \n");
 404   2          }
 405   1      
 406   1          if (flag_get_bat_val)
 407   1          {
 408   2              // å¦‚æœè¦è·å–ç”µæ± ç”µå‹
 409   2              flag_get_bat_val = 0;
 410   2              printf(" flag_get_bat_val \n");
 411   2          }
 412   1      
 413   1          if (flag_set_temp_of_water_warning)
 414   1          {
 415   2              // å¦‚æœè¦è®¾ç½®æ°´æ¸©æŠ¥è­¦
 416   2              flag_set_temp_of_water_warning = 0;
 417   2              printf(" flag_set_temp_of_water_warning \n");
 418   2      
 419   2              //  å‘é€å½“å‰æ°´æ¸©æŠ¥è­¦çš„çŠ¶æ€
C51 COMPILER V9.60.7.0   INSTRUCTION                                                       11/08/2024 16:31:55 PAGE 8   

 420   2          }
 421   1      
 422   1          if (flag_clear_total_mileage)
 423   1          {
 424   2              // å¦‚æœè¦æ¸…é™¤å¤§è®¡é‡Œç¨‹
 425   2              flag_clear_total_mileage = 0;
 426   2              printf(" flag_clear_total_mileage \n");
 427   2          }
 428   1      
 429   1          if (flag_clear_sub_total_mileage)
 430   1          {
 431   2              // å¦‚æœè¦æ¸…é™¤å°è®¡é‡Œç¨‹
 432   2              flag_clear_sub_total_mileage = 0;
 433   2              printf(" flag_clear_sub_total_mileage \n");
 434   2          }
 435   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    991    ----
   CONSTANT SIZE    =    487    ----
   XDATA SIZE       =   ----       1
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =     20    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
